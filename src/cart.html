<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>购物车页</title>
    <link rel="stylesheet" href="./css/cart.min.css">
    <link rel="stylesheet" href="./css/public.min.css">
    <script src="./js/jquery-1.12.4.min.min.js"></script>
    <script src="./js/jquery.cookie.min.js"></script>
    <script src="./js/public.min.js"></script>
    <script src="./js/requestAnimationFrame.min.js"></script>
</head>
<body>
<!-- 页头 -->
     <!-- 注册登录栏 -->
     <div id="toolbar">
        <div class="tool-con">
            <div class="right-show fr">
                <div class="login-show">
                    <a href="">登录</a>
                    <a id="nav-reg" href="">免费注册</a>
                    &nbsp;&nbsp;|&nbsp;&nbsp;
                    <a href="">我的订单</a>
                    <a href="">商家入驻</a>
                </div>
                <div class="bag-show">
                    <a href="" class="bar-a">
                    <span class="icon-normal icon-bag fl"></span>
                    <span class="empty fl">
                        <span class="fl">购物袋</span>
                        <em class="num cartnum">1</em>
                    </span>
                    
                    </a>
                </div>
                <div class="other-show other-show01">
                    <a href="">商家中心</a>
                </div>
                <div class="other-show other-show01">
                    <a href="">客户服务</a>
                </div>
            </div>
        </div>
    </div>
    <!-- 注册登录栏 -->
    <!-- 头部菜单栏 -->
    <div class="header clear">
        <!-- logo 搜索栏 -->
        <div class="area">
            <a href="" class="juan-logo fl" title="卷皮首页">
                <div class="logo logo1">
                    <div class="fl">
                        <span class="juan-txt fl"></span>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <!-- 页头 -->  
<!-- 主体 -->
<div class="sc-csuQGl boKPYq">
    <div class="sc-Rmtcm digzXy">
        <div class="sc-fBuWsC canDc sc-hzDkRC fWrwWU">商品信息</div>
        <div class="sc-hzDkRC fWrwWU">单价/原价</div>
        <div class="sc-fMiknA cpbYri sc-hzDkRC fWrwWU">数量</div>
        <div class="sc-jhAzac ccwVLU sc-hzDkRC fWrwWU">小计</div>
        <div class="sc-dVhcbM hKQHp sc-hzDkRC fWrwWU">操作</div>
    </div>
    <div class="sc-bRbYWo cobIRk">
        <!-- <div class="sc-cJSrbW gdQmFd">
            <div class="sc-eqIVtm cnZstM">
                <div class="sc-gGBfsJ dhEFau">
                    <span class="sc-esjQYD hEFYKq checked"></span>
                </div>
                <div class="sc-caSCKo hEoyiQ">
                    <img class="sc-fAjcbJ jklnfm" src="./images/594233d5a43d1f45d646cb90_72x72.png" alt="">
                    安尚尼女装小店
                </div>
            </div>
            <div class="sc-kvZOFW eiPhbT">
                <div class="sc-kgAjT jgeReN">
                    <div class="sc-jnlKLf hsCwkx sc-gGBfsJ dhEFau">
                        <span class="sc-esjQYD hEFYKq checked"></span>
                    </div>
                    <a href="#">
                        <img class="sc-fYxtnH dTmrnm" width="100" height="100" src="./images/5efae48933b08902745f14e9_800x800.jpg" alt="">
                    </a>
                    <div class="sc-hEsumM bHFcVk sc-tilXH hpxIDz">
                        <strong class="sc-cIShpX fFbWQU">
                            交叉绑带凉鞋女2020夏
                            <span class="sc-kafWEX fFwBrd">库存紧张</span>
                        </strong>
                        <span class="sc-feJyhm fNZORM">
                            35
                            ，
                            蓝色7cm
                        </span>
                    </div>
                    <div class="sc-iELTvK gqzEPU sc-tilXH hpxIDz">
                        ￥
                        89
                        <i class="sc-cmTdod jFEPfJ">
                            / ￥
                            156
                        </i>
                    </div>
                    <div class="sc-jwKygS cABebT sc-tilXH hpxIDz">
                        <span class="sc-bYSBpT jKWKYq sc-btzYZH eXJNFH">-</span>
                        <span class="sc-elJkPf eywEEl sc-btzYZH jqPibT">1</span>
                        <span class="sc-lhVmIH jiKWSK sc-btzYZH jqPibT">+</span>
                    </div>
                    <div class="sc-jtRfpW dQIiuS sc-tilXH hpxIDz">
                        ￥
                        89.00
                    </div>
                    <div class="sc-kTUwUJ giPVvt sc-tilXH hpxIDz">
                        <span class="sc-gxMtzJ ewFBmF sc-dqBHgY carNkP"></span>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="sc-hqyNC dTaAdI">
            <div class="sc-jbKcbu lcRLSj">
                <div class="sc-gGBfsJ dhEFau">
                    <span class="sc-esjQYD hEFYKq checked"></span>
                </div>
                全选
            </div>
            <div class="sc-dNLxif hPtVKw">
                已选择
                <span class="sc-jqCOkK eRltkm">1</span>
                件，
                <span class="sc-iyvyFf jZoxra">
                    总额：￥
                    89
                    &nbsp;满减：￥
                    0
                </span>
                ， 合计（不含运费）
                <span class="sc-uJMKN jUfYqO">
                    ￥
                    89.00
                </span>
                <button class="sc-bbmXgH POmDt">去结算</button>
            </div>
        </div>
    </div>
</div>
<script>
    //获取cookie
    let cookie_str = $.cookie('carts') ? $.cookie('carts') : '';
    if(!cookie_str){
        $('.blank').css('display','block');
    }else{
        //转为对象
        let cookie_obj = $toObj(cookie_str);
        //遍历对象
        for(let key in cookie_obj){
            let good = cookie_obj[key];
            $('.sc-hqyNC').before(`
            <div class="sc-cJSrbW gdQmFd">
    <div class="sc-eqIVtm cnZstM">
        <div class="sc-gGBfsJ dhEFau">
            <span class="sc-esjQYD hEFYKq checked"></span>
        </div>
        <div class="sc-caSCKo hEoyiQ">
            <img class="sc-fAjcbJ jklnfm" src="./images/594233d5a43d1f45d646cb90_72x72.png" alt="">
            ${good.shop_name}
        </div>
    </div>
    <div class="sc-kvZOFW eiPhbT goodInfo " data-good-id="${key}">
        <div class="sc-kgAjT jgeReN">
            <div class="sc-jnlKLf hsCwkx sc-gGBfsJ dhEFau">
                <span class="sc-esjQYD hEFYKq checked"></span>
            </div>
            <a href="#">
                <img class="sc-fYxtnH dTmrnm" width="100" height="100" src="./images/5efae48933b08902745f14e9_800x800.jpg" alt="">
            </a>
            <div class="sc-hEsumM bHFcVk sc-tilXH hpxIDz">
                <strong class="sc-cIShpX fFbWQU">
                    ${good.name}
                    <span class="sc-kafWEX fFwBrd">${good.now}</span>
                </strong>
                <span class="sc-feJyhm fNZORM">
                    ${good.size}
                    ，
                    ${good.color}
                </span>
            </div>
            <div class="sc-iELTvK gqzEPU sc-tilXH hpxIDz">
                ￥ ${good.cprice}
                <i class="sc-cmTdod jFEPfJ">
                    /￥ ${good.oprice}
                </i>
            </div>
            <div class="sc-jwKygS cABebT sc-tilXH hpxIDz">
                <span class="sc-bYSBpT jKWKYq sc-btzYZH eXJNFH minus">-</span>
                <span class="sc-elJkPf eywEEl sc-btzYZH jqPibT num input">${good.num}</span>
                <span class="sc-lhVmIH jiKWSK sc-btzYZH jqPibT plus">+</span>
            </div>
            <div class="sc-jtRfpW dQIiuS sc-tilXH hpxIDz">
                ￥
                ${good.cprice * good.num}
            </div>
            <div class="sc-kTUwUJ giPVvt sc-tilXH hpxIDz">
                <span class="sc-gxMtzJ ewFBmF sc-dqBHgY carNkP del"></span>
            </div>
        </div>
    </div>
</div>
            `)
        }
        //减号
        let $minus = $('.minus');
        $minus.each(function(i,value){
            $(value).click(()=>{
                
                //获取id
                let id = $(this).parents('.goodInfo').attr('data-good-id');
                //获取cookie
                let cookie_str = $.cookie('carts') ? $.cookie('carts') : '';
                //转对象
                let cookie_obj = $toObj(cookie_str);
                //改变数量
                if(cookie_obj[id].num > 0){
                    cookie_obj[id].num --;
                }
                //存入cookie
                $.cookie('carts',JSON.stringify(cookie_obj),{expires : 7,path : '/'});
                //修改数量文本框
                $(this).next().text(cookie_obj[id].num);
                //修改合计
                $(this).parent().next().text("￥" + cookie_obj[id].cprice * cookie_obj[id].num);
            })
        })
        $('.plus').each(function(i,value){
            $(value).click(()=>{
                //当前商品的id
                let id = $(this).parents('.goodInfo').attr('data-good-id');
                //获取cookie
                let cookie_str = $.cookie('carts') ? $.cookie('carts') : '';
                //转对象
                let cookie_obj = $toObj(cookie_str);
                //数量增加
                cookie_obj[id].num ++;
                //存入cookie
                $.cookie('carts',JSON.stringify(cookie_obj),{expires : 7,path : '/'});
                //修改数量文本框
                $(this).prev().text (cookie_obj[id].num);
                //合计
                //修改合计
                $(this).parent().next().text("￥" + cookie_obj[id].cprice * cookie_obj[id].num);
            })
        })
        //数量框
        $('.num input').each(function(index,value){
            $(value).blur(()=>{
                //id
                let id = $(this).parents('.goodInfo').attr('data-good-id');
                
                //获取cookie
                let cookie_str = $.cookie('carts') ? $.cookie('carts') : '';
                //转对象
                let cookie_obj = $toObj(cookie_str);
                //文本框数量
                //非数字   正整数
                let num = $(this).val();
                if(!/^\d+$/.test(num)){
                    num = 0;
                }
                cookie_obj[id].num = num;
                
                //存入cookie
                $.cookie('carts',JSON.stringify(cookie_obj),{expires : 7,path : '/'});
                $(this).val(cookie_obj[id].num);
                $(this).parent().next().text(cookie_obj[id].price * cookie_obj[id].num);
            })
        })
        //删除
        $('.del').each(function(index,value){
            $(value).click(()=>{
                let id = $(this).parents('.goodInfo').attr('data-good-id');
                //获取cookie
                let cookie_str = $.cookie('carts') ? $.cookie('carts') : '';
                //转对象
                let cookie_obj = $toObj(cookie_str);
                //删除对象中的属性
                delete cookie_obj[id];
                //存入cookie
                $.cookie('carts',JSON.stringify(cookie_obj),{expires : 7,path : '/'});
                //删除页面中的商品信息
                $(this).parents('.goodInfo').remove();
            })
        })
    }
</script>
<!-- 主体 -->
<!-- 页脚 -->
<div class="foot">
    <div class="white_bg">
        <div class="foot-con">
            <div class="con-box-n clear">
                <div class="app-side-box fl">
                    <p class="app-show"></p>
                    <p class="app-txt" style="text-align: center;font-size: 14px;">随时逛 及时抢</p>
                </div>
                <div class="con-left-info fl">
                    <dl class="update">
                        <dt>获取更新</dt>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                iPhone/Android
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                卷皮QQ空间
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                卷皮新浪微博
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                开放API
                            </a>
                        </dd>
                    </dl>
                    <dl class="cooperation">
                        <dt>商务合作</dt>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                卖家免费报名
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                商家入驻
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                廉政邮箱
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                开放平台
                            </a>
                        </dd>
                    </dl>
                    <dl class="cor-info">
                        <dt>公司信息</dt>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                关于卷皮
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                媒体报道
                            </a>
                        </dd>
                    </dl>
                    <dl class="help-info">
                        <dt>帮助中心</dt>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                新手上路
                            </a>
                        </dd>
                        <dd>
                            <a href="" target="_blank" rel="nofollow">
                                <i></i>
                                网站地图
                            </a>
                        </dd>
                    </dl>
                </div>
                <div class="con-menu fr">
                    <a href="" class="service-add fl" target="_blank" rel="nofollow"></a>
                    <span class="service-time fl">
                        <p>周一至周日</p>
                        <p>9:00-18:00 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                    </span>
                    <div class="clear"></div>
                    <span class="f12 lh24 vm" title="4000090869">客服热线：400-0090-869</span>
                </div>
            </div>
            <div class="links">
                <span>友情链接：</span>
                <div class="link_list_box">
                    <ul class="link_list">
                        <li>
                        </li>
                        <li></li>
                    </ul>
                </div>
                <a href="" class="more">更多>></a>
            </div>
            <p class="ft-company">
                武汉奇米网络科技有限公司 鄂ICP备10209250号 | ICP许可证号：鄂B2-20150109 | 
                <a href="" target="_blank">鄂公网安备42018502000390号
                </a>
                | 食品流通许可证 SP4201991510041888　　
            </p>
            <p class="ft-company" style="padding-top: 2px;">Copyright © 2010 -2020 JuanPi.com All Rights Reserved</p>
            <div class="logo">
                <a href="" rel="nofollow" target="_blank">
                    <img src="./images/r_315new.gif" alt="">
                </a>
                <a href="" rel="nofollow" target="_blank">
                    <img src="./images/r_cnnic.gif" alt="">
                </a>
                <a href="" rel="nofollow" target="_blank">
                    <img src="./images/r_gongshang.gif" alt="">
                </a>
                <a href="" rel="nofollow" target="_blank">
                    <img src="./images/sm_124x47.png" alt="">
                </a>
            </div>
        </div>
    </div>
</div>
<div class="side_right" id="J_sidebar">
    <div class="side-box">
        <ul class="side-oper" >
            <li class="normal side-user">
                <a href="" id="J_user" class="links">
                    <i class="normal-icon i-user"></i>
                </a>
                <div class="tab-tips tab-login" id="side-login"  >
                    <div class="user-box">
                        <a href="" target="_blank" class="head">
                            <div class="pic">
                                <img src="./images/default-60.jpg" alt="">
                            </div>
                        </a>
                        <p class="txt">
                            快来
                            <a href="" target="_blank">登录</a>
                            吧，么么哒！
                        </p>
                    </div>
                    <i class="close">×</i>
                    <div class="arr-icon">◆</div>
                </div>
            </li>
            <li class="normal side-cart">
                <a href="" class="links links-cart" id="J_cart">
                    <i class="normal-icon i-cart"></i>
                    <em class="num cartnum">0</em>
                </a>
                <div class="tab-tips tab-tag">
                    <div class="carttime"></div>
                    <div class="arr-icon">◆</div>
                </div>
            </li>
            <li class="normal side-love">
                <a href="" id="J_love" target="_blank" class="links">
                    <i class="normal-icon i-love"></i>
                </a>
                <div class="tab-tips">
                    我的收藏
                    <div class="arr-icon">◆</div>
                </div>
            </li>
            <li class="normal side-quan">
                <a href="" target="_blank" id="J_quan" class="links">
                    <i class="normal-icon i-quan"></i>
                </a>
                <div class="tab-tips">
                    我的优惠券
                    <div class="arr-icon">◆</div>
                </div>
            </li>
        </ul>
        <ul class="side-oper other">
            <li class="normal side-ad" style="display: none;">
            </li>
            <li class="normal side-complain">
                <a href="" id="J_complain" target="_blank" class="links">
                    <i class="normal-icon i-complain"></i>
                </a>
                <div class="tab-tips">
                    意见反馈
                    <div class="arr-icon">◆</div>
                </div>
            </li>
            <li class="normal side-code">
                <a href="" id="J_code" target="_blank" class="links">
                    <i class="normal-icon i-code"></i>
                </a>
                <div class="tab-tips">
                    <div class="code-box">
                        <p class="code"></p>
                        <p class="txt" style="text-align: center;font-size: 14px;">随时逛 及时抢</p>
                    </div>
                    <div class="arr-icon">◆</div>
                </div>
            </li>
            <li class="normal side-backtop">
                <a href="" id="J_backtop" class="links">
                    <i class="normal-icon i-backtop"></i>
                </a>
                <div class="tab-tips">
                    返回顶部
                    <div class="arr-icon">◆</div>
                </div>
            </li>
        </ul>
    </div>
    <div class="bag-tool right-bag" id="J-right-bag"></div>
    <div id="side-empty" class="tab-login" style="display:none;opacity: 1;right: 36px;"></div>
</div>
<!-- 页脚 -->
        
</body>
</html>