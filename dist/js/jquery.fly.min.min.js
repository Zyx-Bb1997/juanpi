!function(u){u.fly=function(t,e){var r={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:u.noop},i=this,f=u(t);i.init=function(t){this.setOptions(t),this.settings.autoPlay&&this.play()},i.setOptions=function(t){this.settings=u.extend(!0,{},r,t);var e=this.settings,i=e.start,n=e.end;f.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=n.width&&null!=n.height&&u.extend(!0,i,{width:f.width(),height:f.height()});var o=Math.min(i.top,n.top)-Math.abs(i.left-n.left)/3;o<e.vertex_Rtop&&(o=Math.min(e.vertex_Rtop,Math.min(i.top,n.top)));var h=Math.sqrt(Math.pow(i.top-n.top,2)+Math.pow(i.left-n.left,2)),a=Math.ceil(Math.min(Math.max(Math.log(h)/.05-75,30),100)/e.speed),s=i.top==o?0:-Math.sqrt((n.top-o)/(i.top-o)),p=(s*i.left-n.left)/(s-1),l=n.left==p?0:(n.top-o)/Math.pow(n.left-p,2);u.extend(!0,e,{count:-1,steps:a,vertex_left:p,vertex_top:o,curvature:l})},i.play=function(){this.move()},i.move=function(){var t,e,i,n=this.settings,o=n.start,h=n.count,a=n.steps,s=n.end,p=o.left+(s.left-o.left)*h/a,l=0==n.curvature?o.top+(s.top-o.top)*h/a:n.curvature*Math.pow(p-n.vertex_left,2)+n.vertex_top;null!=s.width&&null!=s.height&&(t=a/2,e=s.width-(s.width-o.width)*Math.cos(h<t?0:(h-t)/(a-t)*Math.PI/2),i=s.height-(s.height-o.height)*Math.cos(h<t?0:(h-t)/(a-t)*Math.PI/2),f.css({width:e+"px",height:i+"px","font-size":Math.min(e,i)+"px"})),f.css({left:p+"px",top:l+"px"}),n.count++;var r=window.requestAnimationFrame(u.proxy(this.move,this));h==a&&(window.cancelAnimationFrame(r),n.onEnd.apply(this))},i.destory=function(){f.remove()},i.init(e)},u.fn.fly=function(t){return this.each(function(){null==u(this).data("fly")&&u(this).data("fly",new u.fly(this,t))})}}(jQuery);